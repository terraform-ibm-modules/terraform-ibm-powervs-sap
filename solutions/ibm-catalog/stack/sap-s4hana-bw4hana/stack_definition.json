{
  "label": "SAP ready PowerVS Stack",
  "name": "sap-ready-to-go-stack",
  "install_type": "fullstack",
  "working_directory": "solutions/ibm-catalog/stack/sap-ready-to-go",
  "compliance": {},
  "configuration": [
    {
      "key": "prerequisite_workspace_id",
      "required": true,
      "custom_config": {
        "config_constraints": {
          "catalogID": "1082e7d2-5e2f-0a11-a3bc-f88a8e1931fc",
          "offeringID": "2dd486c7-b317-4aaa-907b-42671485ad96-global",
          "versionConstraint": ">=5.0.0"
        },
        "grouping": "deployment",
        "original_grouping": "deployment",
        "type": "schematics_workspace"
      }
    },
    {
      "key": "powervs_zone",
      "type": "string",
      "default_value": "",
      "required": true,
      "options": [
        {
          "displayname": "Dallas (dallas)",
          "value": "us-south"
        },
        {
          "displayname": "Dallas 10 (dal10)",
          "value": "dal10"
        },
        {
          "displayname": "Dallas 12 (dal12)",
          "value": "dal12"
        },
        {
          "displayname": "Frankfurt 1 (eu-de-1)",
          "value": "eu-de-1"
        },
        {
          "displayname": "Frankfurt 2 (eu-de-2)",
          "value": "eu-de-2"
        },
        {
          "displayname": "London 04 (lon04) Non-PER",
          "value": "lon04"
        },
        {
          "displayname": "London 06 (lon06)",
          "value": "lon06"
        },
        {
          "displayname": "Montreal 01 (mon01) Non-PER",
          "value": "mon01"
        },
        {
          "displayname": "Osaka 21 (osa21)",
          "value": "osa21"
        },
        {
          "displayname": "Sao Paulo 01 (sao01)",
          "value": "sao01"
        },
        {
          "displayname": "Sao Paulo 04 (sao04)",
          "value": "sao04"
        },
        {
          "displayname": "Sydney 04 (syd04)",
          "value": "syd04"
        },
        {
          "displayname": "Sydney 05 (syd05)",
          "value": "syd05"
        },
        {
          "displayname": "Tokyo 04 (tok04)",
          "value": "tok04"
        },
        {
          "displayname": "Toronto 01 (tor01)",
          "value": "tor01"
        },
        {
          "displayname": "Washington DC (us-east)",
          "value": "us-east"
        },
        {
          "displayname": "Washington DC 06 (wdc06)",
          "value": "wdc06"
        },
        {
          "displayname": "Washington DC 07 (wdc07)",
          "value": "wdc07"
        }
      ],
      "custom_config": {}
    },
    {
      "key": "powervs_resource_group_name",
      "required": true,
      "default_value": "",
      "custom_config": {
        "config_constraints": {
          "identifier": "rg_name"
        },
        "grouping": "deployment",
        "original_grouping": "deployment",
        "type": "resource_group"
      }
    },
    {
      "key": "power_infrastructure_prefix",
      "required": true
    },
    {
      "key": "external_access_ip",
      "default_value": "__NULL__",
      "required": true
    },
    {
      "key": "client_to_site_vpn",
      "required": true
    },
    {
      "key": "ssh_public_key",
      "type": "multiline_secure_value",
      "display_name": "Multiline secure value",
      "required": true,
      "custom_config": {
        "grouping": "deployment",
        "original_grouping": "deployment",
        "type": "multiline_secure_value"
      }
    },
    {
      "key": "ssh_private_key",
      "type": "multiline_secure_value",
      "display_name": "Multiline secure value",
      "required": true,
      "custom_config": {
        "grouping": "deployment",
        "original_grouping": "deployment",
        "type": "multiline_secure_value"
      }
    },
    {
      "key": "powervs_image_names",
      "required": true
    },
    {
      "key": "sap_system_prefix",
      "required": true
    },
    {
      "key": "powervs_sap_network_cidr",
      "required": true,
      "default_value": "10.53.0.0/24"
    },
    {
      "key": "os_image_distro",
      "type": "string",
      "default_value": "",
      "required": true,
      "options": [
        {
          "displayname": "RHEL",
          "value": "RHEL"
        },
        {
          "displayname": "SLES",
          "value": "SLES"
        }
      ],
      "custom_config": {}
    },
    {
      "key": "powervs_create_separate_sharefs_instance",
      "required": true,
      "default_value": false
    },
    {
      "key": "powervs_hana_instance_name",
      "required": true
    },
    {
      "key": "powervs_hana_instance_sap_profile_id",
      "required": true
    },
    {
      "key": "powervs_netweaver_instance_count",
      "required": true
    },
    {
      "key": "powervs_netweaver_instance_name",
      "required": true
    },
    {
      "key": "powervs_netweaver_cpu_number",
      "required": true
    },
    {
      "key": "powervs_netweaver_memory_size",
      "required": true
    },
    {
      "key": "ibmcloud_api_key",
      "type": "multiline_secure_value",
      "display_name": "Multiline secure value",
      "required": true,
      "custom_config": {
        "grouping": "deployment",
        "original_grouping": "deployment",
        "type": "multiline_secure_value"
      }
    },
    {
      "key": "sap_domain",
      "required": true
    },
    {
      "key": "powervs_hana_instance_custom_storage_config",
      "custom_config": {
        "grouping": "deployment",
        "original_grouping": "deployment",
        "type": "json_editor"
      }
    },
    {
      "key": "powervs_hana_instance_additional_storage_config",
      "custom_config": {
        "grouping": "deployment",
        "original_grouping": "deployment",
        "type": "json_editor"
      }
    },
    {
      "key": "powervs_netweaver_instance_storage_config",
      "custom_config": {
        "grouping": "deployment",
        "original_grouping": "deployment",
        "type": "json_editor"
      }
    },
    {
      "key": "powervs_sharefs_instance",
      "custom_config": {
        "grouping": "deployment",
        "original_grouping": "deployment",
        "type": "json_editor"
      }
    },
    {
      "key": "powervs_default_sap_images",
      "custom_config": {
        "grouping": "deployment",
        "original_grouping": "deployment",
        "type": "json_editor"
      }
    }
  ],
  "outputs": [
    {
      "key": "infrastructure_data"
    },
    {
      "key": "access_host_or_ip"
    },
    {
      "key": "powervs_hana_instance_ips"
    },
    {
      "key": "powervs_hana_instance_management_ip"
    },
    {
      "key": "powervs_netweaver_instance_ips"
    },
    {
      "key": "powervs_netweaver_instance_management_ips"
    },
    {
      "key": "powervs_sharefs_instance_ips"
    },
    {
      "key": "powervs_lpars_data"
    }
  ],
  "iam_permissions": [
    {
      "role_crns": ["crn:v1:bluemix:public:iam::::role:Editor"],
      "service_name": "is.vpc"
    },
    {
      "role_crns": ["crn:v1:bluemix:public:iam::::role:Editor"],
      "service_name": "transit.gateway"
    },
    {
      "role_crns": ["crn:v1:bluemix:public:iam::::role:Editor"],
      "service_name": "directlink.connect"
    },
    {
      "role_crns": ["crn:v1:bluemix:public:iam::::serviceRole:Manager"],
      "service_name": "power-iaas"
    }
  ],
  "architecture": {
    "features": [
      {
        "title": "SAP solution",
        "description": "Not installed"
      },
      {
        "title": "PowerVS instances",
        "description": "SAP HANA Instance: 1\n\nSAP NetWeaver Instances: 0,1..N\n\nShared SAP Instance: 0 or 1"
      },
      {
        "title": "Power Virtual Server with VPC landing zone",
        "description": "Available"
      }
    ],
    "diagrams": [
      {
        "diagram": {
          "caption": "Full SAP environment provisioned on a 'Power Virtual Server with VPC landing zone'",
          "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-powervs-sap/main/reference-architectures/sap-ready-to-go/deploy-arch-ibm-pvs-sap-ready-to-go.svg",
          "type": "image/svg+xml"
        },
        "description": "'SAP ready PowerVS' variation of 'Power Virtual Server for SAP HANA' creates a basic and expandable SAP system landscape builds on the foundation of the 'Power Virtual Server with VPC landing zone'. PowerVS instances for SAP HANA, SAP NetWeaver and optionally for shared SAP files are deployed and preconfigured for SAP installation.\n\nServices such as DNS, NTP and NFS running in VPC and provided by 'Power Virtual Server with VPC landing zone' are leveraged.\n\nThe resulting SAP landscape leverages the services such as Activity Tracker, Cloud Object Storage, Key Management and the network connectivity configuration provided by 'Power Virtual Server with VPC landing zone'."
      }
    ]
  }
}
